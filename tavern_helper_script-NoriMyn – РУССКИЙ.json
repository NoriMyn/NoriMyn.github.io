{
  "type": "script",
  "enabled": true,
  "name": "NoriMyn â€“ Ğ Ğ£Ğ¡Ğ¡ĞšĞ˜Ğ™",
  "id": "45ca6ccc-e9aa-4f4e-9272-73941a646cb1",
  "content": "(function() {\n  'use strict';\n\n  const $ = window.jQuery;\n\n  const CONFIG = {\n    cssStyles: `.nv5-wrap{margin:16px 0;font-family:\"Segoe UI\",system-ui,-apple-system,sans-serif;font-size:0.92em;background:rgba(35,28,42,0.52);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border:1px solid rgba(140,115,170,0.22);border-radius:16px;overflow:hidden;box-shadow:0 6px 30px rgba(60,40,80,0.18);color:#ede8f2}.nv5-wrap *{box-sizing:border-box;margin:0;padding:0}.nv5-header{padding:12px 16px;background:rgba(60,45,75,0.38);border-bottom:1px solid rgba(140,115,170,0.18);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:6px 14px}.nv5-loc{font-weight:700;font-size:1.02em;color:#f0eaf5;display:flex;align-items:center;gap:6px;letter-spacing:0.2px}.nv5-meta{font-size:0.86em;color:#cdc0d8;font-weight:500;display:flex;align-items:center;gap:9px;flex-wrap:wrap}.nv5-meta-item{display:flex;align-items:center;gap:4px;white-space:nowrap}.nv5-section{border-top:1px solid rgba(140,115,170,0.15)}.nv5-section input[type=checkbox]{display:none}.nv5-sec-header{padding:10px 16px;background:rgba(55,42,68,0.32);cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background 0.2s;user-select:none}.nv5-sec-header:hover{background:rgba(70,52,88,0.42)}.nv5-sec-title{font-weight:700;font-size:0.86em;text-transform:uppercase;letter-spacing:1.5px;color:#d8cee5;display:flex;align-items:center;gap:6px}.nv5-sec-arrow{color:#b0a0c0;font-size:0.7em;transition:transform 0.3s ease}.nv5-sec-body{max-height:0;overflow:hidden;transition:max-height 0.4s cubic-bezier(0.4,0,0.2,1),padding 0.3s;padding:0 14px;background:rgba(0,0,0,0.06)}.nv5-section input:checked~.nv5-sec-body{max-height:5000px;padding:12px 14px}.nv5-section input:checked~.nv5-sec-header .nv5-sec-arrow{transform:rotate(180deg)}.nv5-char{background:rgba(70,55,88,0.28);border:1px solid rgba(140,115,170,0.16);border-radius:10px;padding:11px 13px;margin-bottom:9px;transition:background 0.2s}.nv5-char:last-child{margin-bottom:0}.nv5-char:hover{background:rgba(80,62,100,0.35)}.nv5-char-away{opacity:0.45}.nv5-char-nearby{opacity:0.7}.nv5-char-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;padding-bottom:7px;border-bottom:1px solid rgba(140,115,170,0.12)}.nv5-char-name{font-weight:700;font-size:0.98em;color:#f2ecf7;display:flex;align-items:center;gap:5px}.nv5-char-status{font-size:0.76em;color:#b0a0c0;text-transform:uppercase;letter-spacing:0.9px;font-weight:600}.nv5-char-grid{display:grid;grid-template-columns:1fr 1fr;gap:7px 12px}.nv5-field{display:flex;flex-direction:column;gap:2px}.nv5-label{font-size:0.76em;color:#a898b8;font-weight:600;text-transform:uppercase;letter-spacing:0.7px}.nv5-value{font-size:0.88em;color:#e5dced;line-height:1.4;font-weight:500}.nv5-feelings{font-style:italic;color:#d0c4de;font-weight:400}.nv5-field:nth-child(4){grid-column:1/-1}.nv5-thought{margin-top:8px;padding:9px 12px;background:rgba(55,40,72,0.32);border-left:3px solid rgba(150,120,190,0.4);border-radius:0 9px 9px 0}.nv5-thought-label{font-size:0.76em;color:#a898b8;font-weight:600;text-transform:uppercase;letter-spacing:0.7px;display:block;margin-bottom:3px}.nv5-thought-text{font-size:0.88em;color:#e0d6ea;font-style:italic;line-height:1.5;font-weight:400}@media(max-width:480px){.nv5-char-grid{grid-template-columns:1fr}.nv5-header{flex-direction:column;align-items:flex-start}}`,\n    mainRegex: /â—ˆNORICOREâ—ˆ([\\s\\S]*?)â—ˆ\\/NORICOREâ—ˆ/gi\n  };\n\n  let TH = null;\n  const statusIcon = { 'Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚': 'ğŸŸ¢', 'Ñ€ÑĞ´Ğ¾Ğ¼': 'ğŸŸ¡', 'Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚': 'âš«', 'present': 'ğŸŸ¢', 'nearby': 'ğŸŸ¡', 'away': 'âš«' };\n\n  function healthIcon(h) {\n    if (!h) return 'ğŸ’š';\n    const l = h.toLowerCase();\n    if (l === 'Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²' || l === 'Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ°' || l === 'fine' || l === 'â€”') return 'ğŸ’š';\n    if (l.includes('ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞº') || l.includes('critical')) return 'ğŸ”´';\n    if (l.includes('ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½') || l.includes('serious')) return 'ğŸŸ ';\n    if (l.includes('ÑƒĞ¼ĞµÑ€ĞµĞ½Ğ½') || l.includes('moderate')) return 'ğŸŸ¡';\n    return 'ğŸ©¹';\n  }\n\n  function healthColor(h) {\n    if (!h) return '#a0b8a0';\n    const l = h.toLowerCase();\n    if (l === 'Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²' || l === 'Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ°' || l === 'fine' || l === 'â€”') return '#a0c8a0';\n    if (l.includes('ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞº') || l.includes('critical')) return '#c87070';\n    if (l.includes('ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½') || l.includes('serious')) return '#c8a070';\n    if (l.includes('ÑƒĞ¼ĞµÑ€ĞµĞ½Ğ½') || l.includes('moderate')) return '#c8c080';\n    return '#a0c8a0';\n  }\n\n  function parse(text) {\n    const data = { scene: null, chars: [] };\n    const sm = text.match(/âŸªĞ¡Ğ¦Ğ•ĞĞâŸ«([^âŸ«]+)âŸ«/);\n    if (sm) {\n      const p = sm[1].split('|').map(s => s.trim());\n      data.scene = { location: p[0] || 'â€”', weather: p[1] || 'â€”', date: p[2] || 'â€”', time: p[3] || 'â€”' };\n    }\n    const rx = /âŸªĞŸĞ•Ğ Ğ¡ĞĞĞĞ–âŸ«([^âŸ«]+)âŸ«/g;\n    let m;\n    while ((m = rx.exec(text)) !== null) {\n      const p = m[1].split('|').map(s => s.trim());\n      if (p[0]) data.chars.push({ name: p[0], status: p[1] || 'Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚', outfit: p[2] || 'â€”', health: p[3] || 'Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²', mood: p[4] || 'â€”', feelings: p[5] || 'â€”', thoughts: p[6] || '' });\n    }\n    return data;\n  }\n\n  function render(data) {\n    if (!data.scene || !data.chars.length) return null;\n    const uid = 'nv' + Math.random().toString(36).substr(2, 8);\n    const s = data.scene;\n    let cards = '';\n    for (let i = 0; i < data.chars.length; i++) {\n      const c = data.chars[i];\n      const statusLower = c.status.toLowerCase();\n      const si = statusIcon[statusLower] || statusIcon[c.status] || 'âšª';\n      const oc = (statusLower === 'Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚' || statusLower === 'away') ? 'nv5-away' :\n                 (statusLower === 'Ñ€ÑĞ´Ğ¾Ğ¼' || statusLower === 'nearby') ? 'nv5-nearby' : '';\n      const hi = healthIcon(c.health);\n      const hc = healthColor(c.health);\n      const hasT = c.thoughts && c.thoughts !== 'â€”' && c.thoughts.length > 0;\n      cards += '<div class=\"nv5-char ' + oc + '\"><div class=\"nv5-char-header\"><span class=\"nv5-char-name\">' + si + ' ' + c.name + '</span><span class=\"nv5-char-status\">' + c.status + '</span></div><div class=\"nv5-char-grid\"><div class=\"nv5-field\"><span class=\"nv5-label\">ğŸ‘— ĞĞ”Ğ•Ğ–Ğ”Ğ</span><span class=\"nv5-value\">' + c.outfit + '</span></div><div class=\"nv5-field\"><span class=\"nv5-label\">' + hi + ' Ğ—Ğ”ĞĞ ĞĞ’Ğ¬Ğ•</span><span class=\"nv5-value\" style=\"color:' + hc + '\">' + c.health + '</span></div><div class=\"nv5-field\"><span class=\"nv5-label\">ğŸ­ ĞĞĞ¡Ğ¢Ğ ĞĞ•ĞĞ˜Ğ•</span><span class=\"nv5-value\">' + c.mood + '</span></div><div class=\"nv5-field\"><span class=\"nv5-label\">ğŸ’œ Ğ§Ğ£Ğ’Ğ¡Ğ¢Ğ’Ğ</span><span class=\"nv5-value nv5-feelings\">' + c.feelings + '</span></div></div>';\n      if (hasT) cards += '<div class=\"nv5-thought\"><span class=\"nv5-thought-label\">ğŸ’­ ĞœĞ«Ğ¡Ğ›Ğ˜</span><div class=\"nv5-thought-text\">' + c.thoughts + '</div></div>';\n      cards += '</div>';\n    }\n    return '<div class=\"nv5-wrap\"><div class=\"nv5-header\"><div class=\"nv5-loc\">ğŸ“ ' + s.location + '</div><div class=\"nv5-meta\"><span class=\"nv5-meta-item\">' + s.weather + '</span><span class=\"nv5-meta-item\">ğŸ“… ' + s.date + '</span><span class=\"nv5-meta-item\">ğŸ• ' + s.time + '</span></div></div><div class=\"nv5-section\"><input type=\"checkbox\" id=\"' + uid + '\"><label for=\"' + uid + '\" class=\"nv5-sec-header\"><span class=\"nv5-sec-title\">ğŸ‘¥ ĞŸĞ•Ğ Ğ¡ĞĞĞĞ–Ğ˜ (' + data.chars.length + ')</span><span class=\"nv5-sec-arrow\">â–¼</span></label><div class=\"nv5-sec-body\">' + cards + '</div></div></div>';\n  }\n\n  function updateMessageVisuals(messageId) {\n    if (!TH) return;\n\n    let messageContent = null;\n    try {\n      const msgsWithSwipes = TH.getChatMessages(messageId, { include_swipes: true });\n      if (msgsWithSwipes && msgsWithSwipes.length > 0) {\n        const m = msgsWithSwipes[0];\n        messageContent = (m.swipes && m.swipes.length > 0) ? (m.swipes[m.swipe_id ?? 0] ?? m.swipes[0]) : m.message;\n      }\n    } catch (_) { }\n    if (!messageContent) {\n      const msgs = TH.getChatMessages(messageId);\n      if (!msgs || msgs.length === 0) return;\n      messageContent = msgs[0].message;\n    }\n    if (!messageContent) return;\n\n    const $mes = TH.retrieveDisplayedMessage(messageId);\n    if (!$mes || !$mes.length) return;\n    const $target = $mes.find('.mes_text').length ? $mes.find('.mes_text') : $mes;\n    let htmlContent = $target.html();\n    if (!htmlContent) return;\n\n    const regex = new RegExp(CONFIG.mainRegex.source, 'gi');\n    const matches = [...htmlContent.matchAll(regex)];\n    if (matches.length === 0) return;\n\n    let newHtml = htmlContent;\n    for (let i = matches.length - 1; i >= 0; i--) {\n      const match = matches[i];\n      const text = match[1];\n      const data = parse(text);\n      const widget = render(data);\n      if (widget) {\n        newHtml = newHtml.substring(0, match.index) + widget + newHtml.substring(match.index + match[0].length);\n      }\n    }\n\n    if (newHtml !== htmlContent) {\n      $target.html(newHtml);\n    }\n  }\n\n  function initializeScript() {\n    if (!window.TavernHelper || !window.tavern_events || typeof window.eventOn !== 'function') {\n      setTimeout(initializeScript, 200);\n      return;\n    }\n\n    TH = window.TavernHelper;\n    const events = window.tavern_events;\n\n    if (!$('#nv5-styles').length) {\n      $('head').append('<style id=\"nv5-styles\">' + CONFIG.cssStyles + '</style>');\n    }\n\n    window.eventOn(events.CHARACTER_MESSAGE_RENDERED, (id) => updateMessageVisuals(id));\n    window.eventOn(events.USER_MESSAGE_RENDERED, (id) => updateMessageVisuals(id));\n\n    const onMessageEdited = (messageId) => setTimeout(() => updateMessageVisuals(messageId), 0);\n    window.eventOn(events.MESSAGE_EDITED, onMessageEdited);\n    window.eventOn(events.MESSAGE_UPDATED, onMessageEdited);\n    window.eventOn(events.MESSAGE_SWIPED, (messageId) => setTimeout(() => updateMessageVisuals(messageId), 0));\n\n    const scanMessages = () => {\n      $('.mes').each(function() {\n        const id = $(this).attr('mesid');\n        if (id) updateMessageVisuals(Number(id));\n      });\n    };\n    scanMessages();\n\n    window.eventOn(events.CHAT_CHANGED, () => setTimeout(scanMessages, 500));\n    window.eventOn(events.MORE_MESSAGES_LOADED, scanMessages);\n\n    console.log('[NoriVoid] âœ¨ Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½');\n  }\n\n  $(document).ready(initializeScript);\n})();",
  "info": "",
  "button": {
    "enabled": false,
    "buttons": []
  },
  "data": {}
}